(this.webpackJsonpmbta_departure_board=this.webpackJsonpmbta_departure_board||[]).push([[0],{16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var i=n(1),s=n(8),r=n.n(s),a=n(2),c=n(3),o=n(6),l=n(5),u=n(4),d=n(0),p=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this;return Object(d.jsx)("div",{className:"four wide column",children:Object(d.jsx)("button",{className:"ui segment ui basic button ui active button",onClick:function(){return t.props.onClick(t.props.typeValue)},children:this.props.name})})}}]),n}(i.Component),j=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"ui raised very padded text container ui equal grid center aligned sixteen wide column",children:[Object(d.jsx)(p,{className:"",name:"Subways",typeValue:"0,1",onClick:this.props.onClick}),Object(d.jsx)(p,{className:"",name:"Commuter Rail",typeValue:"2",onClick:this.props.onClick}),Object(d.jsx)(p,{className:"",name:"Bus",typeValue:"3",onClick:this.props.onClick}),Object(d.jsx)(p,{className:"",name:"Ferry",typeValue:"4",onClick:this.props.onClick})]})}}]),n}(i.Component),h=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props.route.description,e=t.includes("Bus")||t.includes("Limited")?this.props.route.short_name:this.props.route.long_name;return Object(d.jsx)("div",{className:"item",onClick:this.props.onClick,children:e})}}]),n}(i.Component),b=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this;return 0===this.props.routes.length?Object(d.jsx)("div",{}):Object(d.jsx)("div",{className:"left floated six wide column",children:Object(d.jsx)("div",{className:"ui compact menu",children:Object(d.jsxs)("div",{className:"ui simple dropdown segment item four wide column lineColor",children:["Select Line",Object(d.jsx)("i",{className:"dropdown icon center aligned"}),Object(d.jsx)("div",{className:"menu",children:this.props.routes.map((function(e){return Object(d.jsx)(h,{route:e.attributes,routeId:e.id,onClick:function(){return t.props.onClick(e.id)}},e.id)}))})]})})})}}]),n}(i.Component),m=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"item","data-value":this.props.stop.name,onClick:this.props.onClick,children:this.props.stop.name})}}]),n}(i.Component),O=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this;return 0===this.props.stops.length?Object(d.jsx)("div",{}):Object(d.jsx)("div",{className:"left floated six wide column",children:Object(d.jsx)("div",{className:"ui compact menu",children:Object(d.jsxs)("div",{className:"ui simple dropdown item four wide column",children:["Select Stop",Object(d.jsx)("i",{className:"dropdown icon center aligned"}),Object(d.jsx)("div",{className:"menu",children:this.props.stops.map((function(e){return Object(d.jsx)(m,{stop:e.attributes,stopId:e.id,onClick:function(){return t.props.onClick(e.id,e.attributes.name)}},e.id)}))})]})})})}}]),n}(i.Component),v=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=new Date(this.props.arrival.arrival_time),e=t.toLocaleTimeString([],{timeStyle:"short"}),n=new Date,i=Math.ceil((t-n)/6e4);return Object(d.jsxs)("tr",{className:"center aligned",children:[Object(d.jsx)("td",{children:this.props.route}),Object(d.jsx)("td",{children:e}),Object(d.jsx)("td",{children:i>0?"".concat(i," mins"):"Departed"}),Object(d.jsx)("td",{children:this.props.dir})]})}}]),n}(i.Component),f=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{className:"ui raised very padded text container ui equal grid center aligned sixteen wide column",children:[Object(d.jsx)("div",{children:Object(d.jsx)("h3",{className:"ui huge header center aligned",style:{textDecoration:"underline",marginBottom:"0.5em"},children:this.props.stopName?this.props.stopName:"Departure Board"})}),Object(d.jsx)("div",{children:Object(d.jsxs)("table",{className:"ui celled table ui inverted striped table tablet unstackable",children:[Object(d.jsx)("thead",{className:"center aligned",children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Route"}),Object(d.jsx)("th",{children:"Time"}),Object(d.jsx)("th",{children:"Arrival Time"}),Object(d.jsx)("th",{children:"Direction"})]})}),Object(d.jsx)("tbody",{children:this.props.arrivals.filter((function(t){return null!==t.attributes.arrival_time})).map((function(e,n){var i=e.relationships.route.data.id,s=e.attributes.direction_id;return Object(d.jsx)(v,{arrival:e.attributes,route:i,dir:t.props.directions[i]?t.props.directions[i][s]:""},n)}))})]})})]})}}]),n}(i.Component),x=n(9),k=n.n(x),y=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{children:k()().format("MMMM Do YYYY, h:mm:ss a")})}}]),n}(i.Component);function C(t){var e="https://api-v3.mbta.com/".concat(t);return fetch(e).then((function(t){return t.json()})).then((function(t){return t.data})).catch((function(t){return console.log(t)}))}var g=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this,t)).state={date:new Date,transit:null,routes:[],stops:[],routeId:null,stopId:null,stopName:null,arrivals:[]},i.getRoutes=i.getRoutes.bind(Object(o.a)(i)),i.getStops=i.getStops.bind(Object(o.a)(i)),i.getArrivals=i.getArrivals.bind(Object(o.a)(i)),i.handleTransitClick=i.handleTransitClick.bind(Object(o.a)(i)),i.handleRouteClick=i.handleRouteClick.bind(Object(o.a)(i)),i.handleStopClick=i.handleStopClick.bind(Object(o.a)(i)),i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval((function(){return t.tick()}),1e3),C("routes").then((function(e){var n={};e.forEach((function(t){n[t.id]=t.attributes.direction_names})),t.setState({directions:n})}))}},{key:"componentWillUnmount",value:function(){this.timerID<1&&clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({date:new Date})}},{key:"componentDidUpdate",value:function(t,e){e.transit!==this.state.transit?this.getRoutes():e.routeId!==this.state.routeId?this.getStops():e.stopId!==this.state.stopId&&this.getArrivals()}},{key:"getRoutes",value:function(){var t=this,e=this.state.transit;C("routes?filter[type]=".concat(e)).then((function(e){t.setState({routes:e})}))}},{key:"getStops",value:function(){var t=this,e=this.state.routeId;C("stops?filter[route]=".concat(e)).then((function(e){t.setState({stops:e})}))}},{key:"getArrivals",value:function(){var t=this,e=this.state.stopId;C("predictions?filter[stop]=".concat(e)).then((function(e){t.setState({arrivals:e})}))}},{key:"handleTransitClick",value:function(t){this.setState({transit:t,stops:[],stopId:null,arrivals:[]})}},{key:"handleRouteClick",value:function(t){this.setState({routeId:t,stopId:null,arrivals:[]})}},{key:"handleStopClick",value:function(t,e){this.setState({stopId:t,stopName:e})}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"ui grid center aligned container segment",children:[Object(d.jsxs)("div",{className:"ui raised very padded text ui equal grid center aligned sixteen wide column",children:[Object(d.jsx)("h1",{style:{fontSize:"3rem"},children:"MBTA"}),Object(d.jsx)(y,{})]}),Object(d.jsx)(j,{onClick:this.handleTransitClick}),Object(d.jsxs)("div",{className:"ui raised very padded text ui equal grid center aligned sixteen wide column",children:[Object(d.jsx)(b,{routes:this.state.routes,onClick:this.handleRouteClick}),Object(d.jsx)(O,{stops:this.state.stops,onClick:this.handleStopClick})]}),Object(d.jsx)(f,{stopName:this.state.stopName,arrivals:this.state.arrivals,directions:this.state.directions})]})}}]),n}(i.Component);n(16);r.a.render(Object(d.jsx)(g,{}),document.querySelector("#root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.2689961f.chunk.js.map