{"version":3,"sources":["components/Transit.js","containers/TransitOptions.js","components/Routes.js","containers/FromDropdown.js","components/Stops.js","containers/ToDropdown.js","components/Departures.js","containers/DepartureTable.js","components/Time.js","components/App.js","index.js"],"names":["Transit","className","onClick","props","typeValue","this","name","Component","TransitOptions","Routes","routeDesc","route","description","includes","short_name","long_name","FromDropdown","routes","length","map","attributes","routeId","id","Stops","data-value","stop","ToDropdown","stops","stopId","Departures","departureTime","Date","arrival","arrival_time","timeStr","toLocaleTimeString","timeStyle","now","arrivalTime","Math","ceil","dir","DepartureTable","style","textDecoration","marginBottom","stopName","arrivals","filter","arr","index","relationships","data","arrivalDir","direction_id","directions","Time","moment","format","fetchData","endpoint","URL","fetch","then","resp","json","catch","err","console","log","App","state","date","transit","getRoutes","bind","getStops","getArrivals","handleTransitClick","handleRouteClick","handleStopClick","timerID","setInterval","tick","forEach","direction_names","setState","clearInterval","prevProps","prevState","typeVal","fontSize","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.2689961f.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nexport default class Transit extends Component {\n  render() {\n    return(\n      <div className='four wide column'>\n        <button\n          className='ui segment ui basic button ui active button'\n          onClick={() => this.props.onClick(this.props.typeValue)}\n        >\n        {this.props.name}\n        </button>\n      </div>\n    )\n  }\n}","import React, {Component} from 'react';\nimport Transit from '../components/Transit';\n\nexport default class TransitOptions extends Component {\n  render() {\n    return (\n      <div className='ui raised very padded text container ui equal grid center aligned sixteen wide column'>\n        <Transit\n          className=''\n          name=\"Subways\" \n          typeValue=\"0,1\"\n          onClick={this.props.onClick} \n        />\n        <Transit\n          className=''\n          name=\"Commuter Rail\"\n          typeValue=\"2\"\n          onClick={this.props.onClick} \n        />\n        <Transit\n          className=''\n          name=\"Bus\" \n          typeValue=\"3\"\n          onClick={this.props.onClick} \n        />\n        <Transit\n          className=''\n          name=\"Ferry\" \n          typeValue=\"4\"\n          onClick={this.props.onClick} \n        />\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\n\nexport default class Routes extends Component {\n  render() {\n\n        const routeDesc = this.props.route.description;\n        const name = (\n          routeDesc.includes(\"Bus\") || routeDesc.includes(\"Limited\")\n          ) ? this.props.route.short_name : this.props.route.long_name;\n        // console.log('dropdown names:', name)\n    return(\n\n      <div\n        className='item'\n        onClick={this.props.onClick}\n      >\n        {name}\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport Routes from '../components/Routes';\n\nexport default class FromDropdown extends Component {\n  render() {\n\n    if (this.props.routes.length === 0) {\n      return (<div/>)\n    }\n\n    return(\n      <div className='left floated six wide column'>\n        <div className='ui compact menu'>\n          <div className='ui simple dropdown segment item four wide column lineColor'>\n            Select Line\n            <i className='dropdown icon center aligned' />\n            <div className='menu'>\n            {\n              this.props.routes.map((route) => (\n                <Routes key={route.id} \n                  route={route.attributes}\n                  routeId={route.id}\n                  onClick={() => this.props.onClick(route.id)} \n                />\n              )    \n              )\n            }\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\n\nexport default class Stops extends Component {\n  render() {\n    return(\n      <div \n        className='item'\n        data-value={this.props.stop.name}\n        onClick={this.props.onClick}\n      >\n        {this.props.stop.name}\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport Stops from '../components/Stops';\n\nexport default class ToDropdown extends Component {\n  render() {\n      if (this.props.stops.length === 0) {\n          return(<div/>)\n      }\n\n    // console.log('this.props.stops', this.props.stops)\n\n    return(\n      <div className='left floated six wide column'>\n        <div className='ui compact menu'>\n          <div className='ui simple dropdown item four wide column'>\n            Select Stop\n            <i className='dropdown icon center aligned' />\n            <div className='menu'>\n            {\n              this.props.stops.map((stop) => (\n                <Stops\n                  key={stop.id} \n                  stop={stop.attributes}\n                  stopId={stop.id}\n                  onClick={() => this.props.onClick(stop.id, stop.attributes.name)}\n                />\n              ))\n            }\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\n\nexport default class Departures extends Component {\n    render() {\n\n    //departure table arrival info\n      \n      const departureTime = new Date(this.props.arrival.arrival_time);\n      const timeStr = departureTime.toLocaleTimeString([], {timeStyle: 'short'});\n      const now = new Date();\n      const arrivalTime = Math.ceil((departureTime - now) / 60000)\n\n    return(\n            <tr className='center aligned'> \n              <td >{this.props.route}</td>\n              <td >{timeStr}</td>\n              <td >{arrivalTime > 0 ? `${arrivalTime} mins` : 'Departed'}</td>\n              <td >{this.props.dir}</td>\n              {/* <td>{this.props.status}</td> */}\n            </tr>\n    )\n  }\n}","import React, { Component } from 'react';\nimport Departures from '../components/Departures';\n\nexport default class DepartureTable extends Component {\n\nrender() {\n\n// console.log('inside DepartureTable:',this.props.arrivals.relationships.route.data.id)\n\n\n    return(\n       <div className='ui raised very padded text container ui equal grid center aligned sixteen wide column'>\n          <div>\n              <h3 \n                className='ui huge header center aligned'\n                style={{textDecoration:'underline', marginBottom: '0.5em'}}>\n                  {!this.props.stopName ? 'Departure Board' : this.props.stopName}\n              </h3>\n          </div>\n          <div>\n            <table className='ui celled table ui inverted striped table tablet unstackable'>\n              <thead className='center aligned'>\n                <tr>\n                    <th>Route</th>\n                    <th>Time</th>\n                    <th>Arrival Time</th>\n                    <th>Direction</th>\n                    {/* <th>Status</th> */}\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  this.props.arrivals.filter((arr) => arr.attributes.arrival_time !== null)\n                  .map((arr, index) => {\n                    const routeId = arr.relationships.route.data.id;\n                    const arrivalDir = arr.attributes.direction_id;\n                    // const status = arr.attributes.status;\n                    // console.log('status inside table', status)\n                    // console.log('arr', index, 'routeId:', routeId)\n                    // console.log('after clicking stop', arr.attributes)\n                      return (\n                        <Departures \n                          key={index} \n                          arrival={arr.attributes}\n                          route={routeId}\n                          dir={\n                            this.props.directions[routeId]\n                            ? this.props.directions[routeId][arrivalDir]\n                            : '' \n                          }\n                          // status={status} //displays commuter rail status\n                        />\n                      )\n                    }\n                  )\n                }\n              </tbody>\n            </table>\n          </div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport moment from 'moment';\n\nexport default class Time extends Component{\n\n  render() {\n    return (\n      <div>{moment().format('MMMM Do YYYY, h:mm:ss a')}</div>\n    )\n  }\n}","import React, {Component} from 'react';\nimport TransitOptions from '../containers/TransitOptions';\nimport FromDropdown from '../containers/FromDropdown';\nimport ToDropdown from '../containers/ToDropdown';\nimport DepartureTable from '../containers/DepartureTable';\nimport Time from '../components/Time';\n\n\nfunction fetchData(endpoint) {\n    const URL = `https://api-v3.mbta.com/${endpoint}`\n    return fetch(URL)\n            .then((resp) => resp.json())\n            .then((data) => data.data)\n            .catch((err) => console.log(err));\n}\n\nclass App extends Component {\n\nconstructor(props) {\n  super(props);\n\n  this.state = {\n    date: new Date(),\n    transit: null,\n    routes: [],\n    stops: [],\n    routeId: null,\n    stopId: null,\n    stopName: null,\n    // status: null,\n    arrivals: []\n  }\n\n  this.getRoutes = this.getRoutes.bind(this);\n  this.getStops = this.getStops.bind(this);\n  // this.getStatus = this.getStatus.bind(this);\n  this.getArrivals = this.getArrivals.bind(this);\n  this.handleTransitClick = this.handleTransitClick.bind(this);\n  this.handleRouteClick = this.handleRouteClick.bind(this);\n  this.handleStopClick = this.handleStopClick.bind(this);\n}\n\ncomponentDidMount() {\n    this.timerID = setInterval(\n      () => this.tick(),\n      1000\n    );\n\n  fetchData('routes')\n      .then((routes) => {\n          var directions = {};\n          routes.forEach((route) => {\n              directions[route.id] = route.attributes.direction_names;\n          });\n          this.setState({\n              directions: directions\n          });\n      })\n}\n\ncomponentWillUnmount() {\n  if(this.timerID < 1) clearInterval(this.timerID);\n}\n\ntick() {\n  this.setState({\n    date: new Date()\n  });\n}\n\ncomponentDidUpdate(prevProps, prevState) {\n  if (prevState.transit !== this.state.transit) this.getRoutes();\n  else if (prevState.routeId !== this.state.routeId) this.getStops();\n  else if (prevState.stopId !== this.state.stopId) this.getArrivals();\n}\n\ngetRoutes() {\n  const typeVal = this.state.transit;\n  fetchData(`routes?filter[type]=${typeVal}`)\n    .then((routes) => {\n        this.setState({\n            routes: routes\n        });\n    });\n}\n\ngetStops() {\n  const routeId = this.state.routeId;\n  const endpoint = `stops?filter[route]=${routeId}`;\n  fetchData(endpoint)\n    .then((stops) => {\n      this.setState({\n        stops: stops\n      });\n    });\n}\n\n// getStatus() {\n//   const routeId = this.state.routeId;\n//   const stopId = this.state.stopId;\n//   const endpoint = `predictions?filter[stop]=${stopId}&filter[route_type]=${routeId}`\n//   fetchData(endpoint)\n//     .then((status) => {\n//       this.setState({\n//         status: status\n//     });\n//   });\n// }\n\ngetArrivals() {\n  const stopId = this.state.stopId;\n  const endpoint = `predictions?filter[stop]=${stopId}`;\n  fetchData(endpoint)\n      .then((arrivals) => {\n          this.setState({\n              arrivals: arrivals\n          });\n      });\n}\n\nhandleTransitClick(typeVal) {\n  this.setState({\n      transit: typeVal,\n      stops: [],\n      stopId: null,\n      arrivals: []\n  });\n}\n\nhandleRouteClick(routeId) {\n  this.setState({\n      routeId: routeId,\n      stopId: null,\n      arrivals: [],\n  });\n}\n\nhandleStopClick(stopId, stopName) {\n  this.setState({\n      stopId: stopId,\n      stopName: stopName\n  });\n}\n\n\n  render() {\n    return (\n      <div className='ui grid center aligned container segment'>\n        <div className='ui raised very padded text ui equal grid center aligned sixteen wide column'>\n          <h1 style={{fontSize: '3rem'}}>MBTA</h1>\n          <Time/>\n        </div>\n        <TransitOptions \n          onClick={this.handleTransitClick}\n        />\n        <div className='ui raised very padded text ui equal grid center aligned sixteen wide column'>\n          <FromDropdown\n              routes={this.state.routes}\n              onClick={this.handleRouteClick}\n          />\n          <ToDropdown\n              stops={this.state.stops}\n              onClick={this.handleStopClick}\n              // onChange={}\n          />\n        </div>\n        <DepartureTable \n            stopName={this.state.stopName}\n            arrivals={this.state.arrivals}\n            directions={this.state.directions}\n            // status={this.state.status}     \n        />\n      </div>\n    )\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport '../src/assets/index.css'\n\nReactDOM.render(\n  <App/>, document.querySelector('#root')\n);"],"sourceRoot":""}